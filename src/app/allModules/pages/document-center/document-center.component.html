<div fxLayout="column" style="width: 100%;background-color: #ffffff">

    <mat-toolbar style="background-color: #ffffff;border: none !important;">

        <div fxFlex fxFill fxLayout="row" fxLayoutAlign="start center">
            <div class=" my-8" fxFlex="1 0 auto" fxLayout="column" fxLayoutAlign="start start"
                style="margin-top: 20px !important;">
                <!-- <span class="digisign">Digital Signature</span>  -->
                <img style="margin-left: 10px;" src="assets/images/Group 8208.svg">
                <span class="doc-center">Document Center</span>
            </div>
        </div>

    </mat-toolbar>

    <div *ngIf="hidespin " style="width: 100%;" fxLayoutAlign="center center">
        <mat-spinner value="70"></mat-spinner>
    </div>

    <div *ngIf="!hidespin" fxLayout="column">
        <div fxLayout="row" fxLayoutGap="20px" style="padding: 0px 25px;">
            <div fxFlex="30" class="DashBoard_Box" fxLayoutGap="0px" style="padding: 20px;">
                <div fxFlex="33" [ngClass]="{'tab-highlight1':activeLink=='Released'}" class="Card_1"
                    style="padding: 10px;cursor: pointer;" (click)="ActiveLink('Released')">
                    <div fxlayout="column">
                        <div fxLauoutAlign="start center">
                            <img src="assets/images/Ellipse 55.svg">
                        </div>
                        <div fxLayout="row" fxLayoutAlign="center center">
                            <span><label class="sign_label">{{signlength1}}</label></span>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="center center">
                            <span style="text-align: center;"><label class="sign_label1">Sent To
                                    Sign</label></span>
                        </div>
                    </div>
                </div>
                <div fxFlex="33" [ngClass]="{'tab-highlight2':activeLink=='Completed'}" class="Card_2"
                    style="padding: 10px;cursor: pointer;" (click)="ActiveLink('Completed')">
                    <div fxLauoutAlign="start center">
                        <img src="assets/images/Ellipse 60.svg">
                    </div>
                    <div fxLayout="row" fxLayoutAlign="center center">
                        <span><label class="sign_label3">{{signcompletelength1}}</label></span>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="center center">
                        <span style="text-align: center;"><label class="sign_label1"> Signing
                                Completed</label></span>
                    </div>
                </div>
                <div fxFlex="33" [ngClass]="{'tab-highlight3':activeLink=='In Signing'}" class="Card_3"
                    style="padding: 10px;cursor: pointer;" (click)="ActiveLink('In Signing')">
                    <div fxLauoutAlign="start center">
                        <img src="assets/images/Ellipse 61.svg">
                    </div>
                    <div fxLayout="row" fxLayoutAlign="center center">
                        <span><label class="sign_label2">{{signcompletelength3}}</label></span>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="center center">
                        <span style="text-align: center;"><label class="sign_label1">In Signing</label></span>
                    </div>
                </div>
            </div>
            <div fxFlex="70" fxLayout="row" fxLayoutGap="30px" class="DashBoard_Box1"
                style="padding-left: 20px;padding-right: 20px;padding-top: 10px;">

                <div fxFlex="70">
                    <div id="chart">
                        <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                            [xaxis]="chartOptions.xaxis" [stroke]="chartOptions.stroke" [tooltip]="chartOptions.tooltip"
                            [dataLabels]="chartOptions.dataLabels" [responsive]="chartOptions.responsive"
                            [legend]="chartOptions.legend"></apx-chart>
                    </div>
                </div>
                <div fxFlex="30" fxLayout="row" fxLayoutAlign="center center">
                    <img style="width: 80%;" src="assets/images/Image 59.png">
                </div>


            </div>
        </div>

        <!-- <div fxFlex="2" class="body"></div> -->
        <div fxLayout="column" fxFlex="96" fxLayoutGap="20px" class="body" style="padding: 0px 25px;">

            <!-- Second Row-->

            <div fxLayout="row" class="topgap" fxLayoutGap="20px" fxLayoutAlign="space-between center" style="margin-top: 0px;">
                <div fxFlex="40">
                    <!-- <button mat-flat-button class="searchbar" style="width: 100%;" [matMenuTriggerFor]="menu"
                        #t="matMenuTrigger">
                        <span class="outer">
                            <img class="search" [style.transform]="t.menuOpen? 'scale(1.3)' : 'scale(1)' "
                                src="assets/images/search.svg"> </span>
                        <span class="searchtxt">Search</span>
                        <mat-icon class="droparrow">arrow_drop_down</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu" class="menu">
                        <button class="menubtn" mat-menu-item>
                            Date
                        </button>
                        <button class="menubtn" mat-menu-item>
                            Title
                        </button>
                    </mat-menu> -->
                    <div [formGroup]="form" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="30px">
                        
                        <div fxFlex="25" style="margin-top: -20px !important;">
                           
                            <mat-form-field class="form-field" appearance="outline" style="width: 100%;
                            font-size: 12px;">
                                <mat-label class="label1">From Date</mat-label>
                                <input class="input" matInput [matDatepicker]="picker1" formControlName="fromdate"
                                     placeholder="Enter From Date" (dateChange)="DateSelected()">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div fxFlex="25" style="margin-top: -20px !important;">
                           
                            <mat-form-field class="form-field" appearance="outline" style="width: 100%;
                            font-size: 12px;">
                                <mat-label class="label1">To Date</mat-label>
                                <input class="input" matInput [matDatepicker]="picker2" formControlName="todate"
                                  placeholder="Enter To Date" (dateChange)="DateSelected()">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                              </mat-form-field>
                            <div *ngIf="isDateError" class="DateError">
                                To date should not be less than from date
                            </div>
                        </div>
                        <div fxFlex="20" class="ml-44" fxlayoutAlign="start center" style="margin-top: 20px;">
                            <button class="CREate" mat-flat-button fxLayout="row" (click)="SearchClicked()" fxLayoutAlign="center center">
                                <span class="span"> Search  </span>
                                <img class="blueflow" src="../../assets/images/flowerblue.svg">
                            </button>
                            <!-- <button mat-raised-button class="SaveBtn" (click)="SearchClicked()">Search</button> -->
                        </div>
                    </div>
                </div>

                <nav mat-tab-nav-bar fxFlex="50" style="margin-top: 10px;">
                    <a mat-tab-link *ngFor="let link of links" (click)="ActiveLink(activeLink=link) "
                        [ngClass]="link === 'Create'?'Mar_cls':'none'" [active]="activeLink == link">
                        {{link}} </a>

                </nav>

                <div fxFlex="20" fxLayoutAlign="end end" style="margin-top: 20px;">
                    <div class="created" (click)="addbutton()">

                        <button class="CREate" mat-flat-button fxLayout="row" fxLayoutAlign="center center">
                            <span class="span"> Create + </span>
                            <img class="blueflow" src="../../assets/images/flowerblue.svg">
                        </button>


                    </div>
                </div>
            </div>

            <div class="tablescroll">

                <table mat-table [dataSource]="employeesDataSource">

                    <ng-container matColumnDef="title">
                        <th mat-header-cell *matHeaderCellDef><span class="thtitle"> Title </span></th>
                        <td mat-cell *matCellDef="let element"> {{element.title}} </td>
                    </ng-container>

                    <ng-container matColumnDef="author">
                        <th mat-header-cell *matHeaderCellDef> <span class="thauthor"> Author </span></th>
                        <td mat-cell *matCellDef="let element"> {{element.author}} </td>
                    </ng-container>

                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef><span class="thdate">Date</span> </th>
                        <td mat-cell *matCellDef="let element"> {{element.createdOn | date}} </td>
                    </ng-container>

                    <ng-container matColumnDef="fulfilment">
                        <th mat-header-cell *matHeaderCellDef> <span class="thful">Fulfilment</span> </th>
                        <td mat-cell *matCellDef="let element">
                            <ng-container *ngIf="(element.fulfilment == 'Created')||(element.fulfilment == 'Draft')">

                                <mat-progress-bar class="progressone" mode="determinate" value="25">
                                </mat-progress-bar>
                                <span class="hider">
                                    <span class="span1">gananathanks</span>
                                    &nbsp;&nbsp;
                                    {{element.fulfilment?'Created':'Draft'}}</span>
                            </ng-container>
                            <ng-container *ngIf="element.fulfilment == 'Released'">
                                <mat-progress-bar class="progresstwo" mode="determinate" value="50">
                                </mat-progress-bar>
                                <span class="hider">
                                    <span class="span2">gananathanks</span>
                                    &nbsp;&nbsp;
                                    {{element.fulfilment}}</span>
                            </ng-container>
                            <ng-container *ngIf="element.fulfilment == 'In Signing'">
                                <mat-progress-bar class="progressthree" mode="determinate" value="75">
                                </mat-progress-bar>
                                <span class="hider">
                                    <span class="span3">gananathanks</span>
                                    &nbsp;&nbsp;
                                    {{element.fulfilment}}</span>
                            </ng-container>
                            <!-- <ng-container *ngIf="element.fulfilment == 'Draft'">
                            <mat-progress-bar class="progressthree1" style="background-color:#ffffff !important;" mode="determinate" value="1">
                            </mat-progress-bar>
                            <span class="hider">
                                <span class="span3">gananathanks</span>
                                &nbsp;&nbsp;
                                {{element.fulfilment}}</span>
                        </ng-container> -->
                            <ng-container *ngIf="element.fulfilment == 'Completed'">
                                <mat-progress-bar class="progressfour" mode="determinate" value="100">
                                </mat-progress-bar>
                                <span class="hider">
                                    <span class="span4">gananathanks</span>
                                    &nbsp;&nbsp;
                                    {{element.fulfilment}}</span>
                            </ng-container>


                        </td>
                    </ng-container>
                    <ng-container matColumnDef="signed">
                        <th mat-header-cell *matHeaderCellDef> <span class="thsign"> Signed </span></th>
                        <td mat-cell *matCellDef="let element">{{element.scount}} / {{element.tscount}} </td>
                    </ng-container>
                    <ng-container matColumnDef="completeby">
                        <th mat-header-cell *matHeaderCellDef style="padding-left: 10px;"><span
                                class="thcomplete">Completed On</span> </th>
                        <td mat-cell *matCellDef="let element">{{element.completeby | date}} </td>
                    </ng-container>
                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef><span class="thaction">Action</span> </th>
                        <td mat-cell *matCellDef="let element" style="padding-left: 20px;">
                            <div fxLayout="row" fxLayoutAlign="space-evenly center">
                                <div fxLayout="row" fxFlex="90" fxLayoutAlign="center" fxLayoutGap="10px">
                                    <div *ngIf="element.docId===selecteddocId?hidespin1:none "
                                        style="margin-top:-15% !important;" fxLayoutAlign="center center">
                                        <mat-spinner diameter="20"></mat-spinner>
                                    </div>
                                    <mat-icon style="cursor: pointer;color: #057dfb;
                                    font-size: 20px;" matTooltip="Send Remainder"
                                        *ngIf="element.fulfilment=='Released'?true:element.fulfilment=='In Signing'?true:false"
                                        matTooltipPosition='above' class="notify"
                                        (click)="sendRemainder(element.client,element.company,element.docId,element.fulfilment,element.author,element.createdOn,element.completeby)">
                                        notifications</mat-icon>
                                    <!-- <img style="cursor: pointer;" matTooltip="Send Remainder" *ngIf="element.fulfilment=='Released'?true:element.fulfilment=='In Signing'?true:false" matTooltipPosition='above' class="notify"
                                        (click)="sendRemainder(element.client,element.company,element.docId,element.fulfilment,element.author,element.createdOn,element.completeby)" src="assets/images/Notify.svg"> -->
                                    <!-- <img style="cursor: pointer;" matTooltip="Foreclose"  (click)="onSelect(element)" matTooltipPosition='above' class="close"
                                        src="assets/images/close.svg"> -->
                                    <mat-icon style="cursor: pointer;color:  #ff4560;;
                                        font-size: 20px;" matTooltip="Foreclose" (click)="onSelect(element)"
                                        matTooltipPosition='above' class="close">delete</mat-icon>
                                </div>
                                <div fxFlex="10">
                                    <mat-icon class="more" [matMenuTriggerFor]="moremenu">more_vert</mat-icon>
                                    <mat-menu #moremenu="matMenu" xPosition="before">
                                        <button mat-menu-item
                                            (click)="sign(element.client,element.company,element.docId,element.fulfilment,element.author,element.createdOn,element.completeby)"
                                            *ngIf="boolNxtsign(element)">
                                            Sign Doc.
                                        </button>
                                        <button mat-menu-item
                                            (click)="sign(element.client,element.company,element.docId,element.fulfilment,element.author,element.createdOn,element.completeby)"
                                            *ngIf="((element.signStatus=='nxtsign')&&element.fulfilment!='Completed')?true:false">
                                            Sign Doc.
                                        </button>
                                        <button mat-menu-item
                                            (click)="view(element.client,element.company,element.docId,element.fulfilment)"
                                            *ngIf="(element.client==curruser.ClientID)&&(element.fulfilment=='Draft'||element.fulfilment=='Released')?true:false">
                                            View Doc.
                                        </button>
                                        <button mat-menu-item
                                            (click)="viewDoc(element.client,element.company,element.docId,element.fulfilment,element.author,element.createdOn,element.completeby)"
                                            *ngIf="(element.signStatus=='signed' || (element.client==curruser.ClientID))&&(element.fulfilment=='In Signing' || element.fulfilment=='Completed')?true:false">
                                            View Doc.
                                        </button>
                                    </mat-menu>
                                </div>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="employeesDisplayColumns; sticky: true"
                        style="background-color: #f7f9fd;"></tr>
                    <tr mat-row *matRowDef="let row; columns: employeesDisplayColumns;"></tr>
                </table>

            </div>


        </div>
        <!-- <div fxFlex="2" class="body"></div> -->

        <!-- Right end  -->

        <!-- <div fxFlex="20" fxLayout="column" fxLayoutGap="28px" class="body">


            

            <mat-card class="card" fxLayout="column">
                <img class="flower" src="../../assets/images/flowerblue.svg">
                <div fxLayout="row" fxLayoutGap="15px">

                    <img class="aligndocsign" src="assets/images/DSigned.svg">

                    <div fxLayout="column" fxLayoutAlign="center center">
                        <div fxLayout="row-wrap" fxLayoutGap="10px">
                            <span fxLayout="row"><p class="docsign">Document Signed</p>
                            <h4 class="h4">{{effi_percentage}}%</h4></span>
                        </div>
                        <mat-progress-bar class="progress" mode="determinate" [value]="effi_percentage"></mat-progress-bar>
                    </div>
                </div>
                <hr class="hr">
                <div fxLayout="row" fxFlexOffset="5" fxLayoutGap="15px">
                    <img class="aligndocsign" src="assets/images/Group.svg">

                    <div fxLayout="column">
                        <div fxLayout="row" fxLayoutGap="10px">
                            <p class="docsign">Signing Progress</p>
                            <h4 class="h4">{{Signing_process}}%</h4>
                        </div>
                        <mat-progress-bar class="progress1" mode="determinate" [value]="Signing_process"></mat-progress-bar>
                    </div>
                </div>
            </mat-card>

            

            <mat-card class="card2" fxLayout="column" fxLayoutGap="15px">
                <div fxLayout="row" fxLayoutGap="15px" class="signrow">
                    <img class="docperson" src="../../assets/images/docperson.svg">
                    <p class="signprocess">Sign Process</p>
                </div>
                
                    <div id="chart" fxLayoutAlign="center center" >
                        <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                            [labels]="chartOptions.labels" [responsive]="chartOptions.responsive"
                            [colors]="chartOptions.colors"></apx-chart>
                    </div>
                
            </mat-card>


        </div> -->
    </div>

</div>